<html>
	<head>
		<title>To Do con cookies</title>
		<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  		<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
		<script src="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.js"></script>
		<meta name="tipo_contenido" content="text/html" http-equiv="content-type" charset="utf-8" />
	</head>
	<body>
		<div id="contenedor">
			<div id="lista">
				<h1>Lista de la compra</h1>
			</div>
			<div id="formulario">
				<hr>
				<input type="text" id="producto" />
				<br>
				<button id="añadir">Añadir</button>
				<button id="eliminar">Eliminar</button>
			</div>
		</div>
		<script>
			if(localStorage.c)
			{
				$("#lista").html(localStorage.c);
			}

			$("#añadir").on('click',function()
			{
				var producto = $("#producto").val();
				var listado = $("#lista").html();
				$("#lista").html(listado + "<div><input type='checkbox'>"  + producto + "</input>" + "</div>");
				$("#producto").val("");

				localStorage.c = $("#lista").html();
			}
			);

			$("#eliminar").on('click', function()
			{
				$('input:checkbox').each(function()
				{
					var check = $(this);
					if(check.is(':checked'))
					{
						$(this).parent().remove();
						localStorage.c = $("#lista").html();
					}
				}
				);
			}
			);

			$("#producto").keypress(function(event)
			{
				if(event.which == 13)
				{
					var producto = $("#producto").val();
					var listado = $("#lista").html();
					$("#lista").html(listado + "<div><input type='checkbox'></input>" + "<span>" + producto +"</span></div>");
					$("#producto").val("");

					localStorage.c = $("#lista").html();
				}
			}
			);
		</script>
	</body>
</html>
